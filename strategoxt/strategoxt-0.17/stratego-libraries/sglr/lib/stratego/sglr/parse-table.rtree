Module("stratego/sglr/parse-table",[Imports([Import("libstratego-lib")]),Strategies([SDefNoArgs("open-parse-table",Seq(Match(Var("tbl")),Seq(AM(Prim("\"STRSGLR_open_parse_table\"",[Var("tbl")]),Var("internal")),Build(NoAnnoList(Op("ParseTable",[Var("internal")])))))),SDefNoArgs("close-parse-table",Seq(Match(NoAnnoList(Op("ParseTable",[Var("internal")]))),Seq(Prim("\"STRSGLR_close_parse_table\"",[Var("internal")]),Build(NoAnnoList(Tuple([])))))),SDefT("is-parse-table-open",[],[DefaultVarDec("tbl")],Where(AM(Build(Var("tbl")),NoAnnoList(Op("ParseTable",[Wld])))))]),Strategies([SDefT("open-parse-table-wrap-report-errors",[VarDec("s",FunType([ConstType(SortNoArgs("OpenParseTable")),ConstType(SortVar("a"))],ConstType(SortVar("b"))))],[DefaultVarDec("tbl")],Seq(Where(Assign(Var("tbl'"),App(CallNoArgs(SVar("open-parse-table-report-errors")),Var("tbl")))),Call(SVar("finally"),[CallT(SVar("s"),[],[Var("tbl'")]),BA(CallNoArgs(SVar("close-parse-table")),Var("tbl'"))]))),SDefNoArgs("open-parse-table-report-errors",Seq(CondChoice(CallNoArgs(SVar("is-string")),Seq(AM(LChoice(BA(CallNoArgs(SVar("fopen")),NoAnnoList(Tuple([RootApp(Id),NoAnnoList(Str("\"r\""))]))),CallNoArgs(SVar("strsglr-perror"))),Var("stream")),Call(SVar("finally"),[CallNoArgs(SVar("read-from-stream")),BA(CallNoArgs(SVar("fclose")),Var("stream"))])),LChoice(Match(NoAnnoList(Explode(NoAnnoList(Str("\"parse-table\"")),Wld))),Seq(CallT(SVar("log"),[],[NoAnnoList(Op("Error",[])),NoAnnoList(Str("\"open-parse-table strategy applied to a non-parse-table\""))]),Fail))),CallNoArgs(SVar("open-parse-table"))))]),Signature([Constructors([OpDecl("ParseTable",FunType([ConstType(SortNoArgs("Internal"))],ConstType(SortNoArgs("ParseTable"))))])])])
