Module("stratego/asfix/implode/injection",[Rules([RDefNoArgs("ImplodeInjection",Rule(NoAnnoList(Op("appl",[Var("p"),NoAnnoList(List([Var("t")]))])),Var("t"),BA(CallNoArgs(SVar("is-injection")),Var("p")))),RDefNoArgs("ImplodeInjection",Rule(NoAnnoList(Op("appl",[NoAnnoList(Op("prod",[NoAnnoList(List([NoAnnoList(Op("lit",[Var("x")]))])),Var("sym"),Var("attrs")])),NoAnnoList(List([]))])),Var("x"),Seq(BA(Choice(CallNoArgs(SVar("asfix-is-sort")),Call(SVar("cf"),[CallNoArgs(SVar("asfix-is-sort"))])),Var("sym")),BA(Not(Call(SVar("oncetd"),[Call(SVar("cons"),[Id])])),Var("attrs"))))),RDefNoArgs("ImplodeInjection",Rule(NoAnnoList(Op("appl",[NoAnnoList(Op("prod",[NoAnnoList(List([NoAnnoList(Op("cilit",[Var("x")]))])),Var("sym"),Var("attrs")])),NoAnnoList(List([]))])),Var("x"),Seq(BA(Choice(CallNoArgs(SVar("asfix-is-sort")),Call(SVar("cf"),[CallNoArgs(SVar("asfix-is-sort"))])),Var("sym")),BA(Not(Call(SVar("oncetd"),[Call(SVar("cons"),[Id])])),Var("attrs")))))]),Strategies([SDefNoArgs("is-injection",Match(NoAnnoList(Op("prod",[Wld,NoAnnoList(Op("sort",[NoAnnoList(Str("\"<START>\""))])),Wld])))),SDefNoArgs("is-injection",Call(SVar("prod"),[Id,Id,Call(SVar("oncetd"),[Choice(StrCong("\"bracket\""),CallNoArgs(SVar("bracket")))])])),SDefNoArgs("is-injection",Seq(Match(NoAnnoList(Op("prod",[NoAnnoList(List([NoAnnoList(Op("cf",[NoAnnoList(Op("iter",[Var("x")]))]))])),NoAnnoList(Op("cf",[NoAnnoList(Op("iter-star",[Var("x")]))])),Var("attrs")]))),Where(BA(Not(Call(SVar("oncetd"),[Call(SVar("cons"),[Id])])),Var("attrs"))))),SDefNoArgs("is-injection",Seq(Match(NoAnnoList(Op("prod",[NoAnnoList(List([NoAnnoList(Op("cf",[NoAnnoList(Op("iter-sep",[Var("x"),Var("l")]))]))])),NoAnnoList(Op("cf",[NoAnnoList(Op("iter-star-sep",[Var("x"),Var("l")]))])),Var("attrs")]))),Where(BA(Not(Call(SVar("oncetd"),[Call(SVar("cons"),[Id])])),Var("attrs"))))),SDefNoArgs("is-injection",Call(SVar("prod"),[ListCongNoTail([Not(Call(SVar("lit"),[Id]))]),Rec("x",Choice(CallNoArgs(SVar("asfix-is-sort")),Choice(Call(SVar("cf"),[CallNoArgs(SVar("x"))]),Choice(Call(SVar("lex"),[CallNoArgs(SVar("x"))]),Choice(Call(SVar("iter"),[CallNoArgs(SVar("x"))]),Choice(Call(SVar("iter-star"),[CallNoArgs(SVar("x"))]),Choice(Call(SVar("iter-sep"),[CallNoArgs(SVar("x")),Call(SVar("lit"),[Id])]),Call(SVar("iter-star-sep"),[CallNoArgs(SVar("x")),Call(SVar("lit"),[Id])])))))))),Not(Call(SVar("oncetd"),[Call(SVar("cons"),[Id])]))])),SDefNoArgs("is-injection",Call(SVar("prod"),[ListCongNoTail([Choice(CallNoArgs(SVar("asfix-is-sort")),Call(SVar("cf"),[CallNoArgs(SVar("asfix-is-sort"))]))]),CallNoArgs(SVar("is-injective-alt")),Not(Call(SVar("oncetd"),[Call(SVar("cons"),[Id])]))])),SDefNoArgs("is-injection",Call(SVar("prod"),[ListCongNoTail([Call(SVar("varsym"),[Id])]),Id,Not(Call(SVar("oncetd"),[Call(SVar("cons"),[Id])]))])),SDefNoArgs("is-injective-alt",Rec("x",Choice(CallNoArgs(SVar("asfix-is-sort")),Choice(Call(SVar("cf"),[CallNoArgs(SVar("x"))]),Call(SVar("alt"),[CallNoArgs(SVar("x")),CallNoArgs(SVar("x"))]))))),SDefNoArgs("asfix-is-sort",Choice(Call(SVar("sort"),[Id]),Call(SVar("parameterized-sort"),[Id,Call(SVar("map"),[CallNoArgs(SVar("asfix-is-sort"))])])))])])
